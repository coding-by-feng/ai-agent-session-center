/* ============================================================
   Claude Session Command Center - Dark Command Center Theme
   ============================================================ */

:root {
  --bg-primary: #0a0a1a;
  --bg-card: #12122a;
  --bg-card-hover: #1a1a3a;
  --bg-panel: #0e0e24;
  --bg-header: #0e0e28;
  --border-glow: #00ffcc;
  --border-subtle: rgba(255, 255, 255, 0.06);
  --border-accent: rgba(0, 229, 255, 0.15);
  --accent-cyan: #00e5ff;
  --accent-orange: #ff9100;
  --accent-green: #00ff88;
  --accent-red: #ff3355;
  --accent-purple: #aa66ff;
  --text-primary: #e0e0ff;
  --text-secondary: #8888aa;
  --text-dim: #555577;
  --robot-body: #2a2a4a;
  --robot-body-dark: #1a1a3a;
  --robot-border: rgba(255, 255, 255, 0.08);
  --mute-bg: rgba(10, 10, 26, 0.6);
  --overlay-bg: rgba(0, 0, 0, 0.5);
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
}

/* ---- Reset & Base ---- */

*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 13px;
  line-height: 1.5;
}

body {
  display: grid;
  grid-template-rows: auto auto 1fr auto;
  grid-template-areas:
    "header"
    "nav"
    "main"
    "footer";
  position: relative;
}

/* Scanline overlay on the whole viewport */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.04) 2px,
    rgba(0, 0, 0, 0.04) 4px
  );
  animation: scanline 8s linear infinite;
}

/* ---- Utility ---- */

.hidden {
  display: none !important;
}

/* ---- Header ---- */

#header {
  grid-area: header;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  background: linear-gradient(180deg, var(--bg-header) 0%, var(--bg-primary) 100%);
  border-bottom: 1px solid var(--border-accent);
  z-index: 10;
  position: relative;
}

.header-title {
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 3px;
  color: var(--accent-cyan);
  text-shadow: 0 0 20px rgba(0, 229, 255, 0.4);
  white-space: nowrap;
}

.header-title .logo {
  font-size: 18px;
  margin-right: 8px;
  vertical-align: middle;
}

#global-stats {
  display: flex;
  gap: 24px;
  font-size: 11px;
  color: var(--text-secondary);
  letter-spacing: 1px;
}

#global-stats .stat {
  display: flex;
  align-items: center;
  gap: 6px;
}

#global-stats .stat-value {
  color: var(--text-primary);
  font-weight: 500;
}

#global-stats .stat-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  display: inline-block;
}

#global-stats .stat-dot.connected {
  background: var(--accent-green);
  box-shadow: 0 0 6px var(--accent-green);
}

#global-stats .stat-dot.disconnected {
  background: var(--accent-red);
  box-shadow: 0 0 6px var(--accent-red);
}

/* ---- (Three.js canvas removed — CSS robots used instead) ---- */

/* ---- Sessions Grid ---- */

#sessions-grid {
  grid-area: main;
  position: relative;
  z-index: 1;
  pointer-events: auto;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
  gap: 24px;
  padding: 24px;
  overflow-y: auto;
  align-content: start;
}

/* Scrollbar styling */
#sessions-grid::-webkit-scrollbar {
  width: 6px;
}

#sessions-grid::-webkit-scrollbar-track {
  background: transparent;
}

#sessions-grid::-webkit-scrollbar-thumb {
  background: var(--border-accent);
  border-radius: 3px;
}

#sessions-grid::-webkit-scrollbar-thumb:hover {
  background: var(--text-dim);
}

/* ---- Session Card ---- */

.session-card {
  border-radius: 12px;
  border: 1px solid var(--border-subtle);
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  position: relative;
  background: var(--bg-card);
}

.session-card:hover {
  transform: translateY(-2px);
  background: var(--bg-card-hover);
}

/* Robot viewport — houses CSS robot character */
.session-card .robot-viewport {
  min-height: 200px;
  position: relative;
  overflow: hidden;
  padding-top: 180px;
}

/* Subtle gradient at bottom of viewport blending into card-info */
.session-card .robot-viewport::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 50px;
  background: linear-gradient(to bottom, transparent, var(--bg-card));
  pointer-events: none;
  z-index: 1;
}

/* (action-label removed — status shown only via status-badge in card header) */

/* Card info - solid background */
.session-card .card-info {
  background: var(--bg-card);
  padding: 16px 20px;
}

.session-card .card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.session-card .project-name {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 170px;
}

.session-card .status-badge {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1.5px;
  padding: 2px 8px;
  border-radius: 3px;
  text-transform: uppercase;
}

.session-card .status-badge.idle {
  color: var(--accent-green);
  border: 1px solid rgba(0, 255, 136, 0.3);
  background: rgba(0, 255, 136, 0.08);
}

.session-card .status-badge.prompting {
  color: var(--accent-cyan);
  border: 1px solid rgba(0, 229, 255, 0.3);
  background: rgba(0, 229, 255, 0.08);
}

.session-card .status-badge.working {
  color: var(--accent-orange);
  border: 1px solid rgba(255, 145, 0, 0.3);
  background: rgba(255, 145, 0, 0.08);
}

.session-card .status-badge.ended {
  color: var(--accent-red);
  border: 1px solid rgba(255, 51, 85, 0.3);
  background: rgba(255, 51, 85, 0.08);
}

.session-card .card-prompt {
  font-size: 11px;
  color: var(--text-secondary);
  margin-bottom: 10px;
  overflow: hidden;
  text-overflow: ellipsis;
  font-style: italic;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  line-height: 1.5;
}

.session-card .card-stats {
  display: flex;
  gap: 12px;
  font-size: 10px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}

/* Tool usage bars */
.session-card .tool-bars {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.session-card .tool-bar {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 9px;
}

.session-card .tool-bar .tool-name {
  width: 40px;
  color: var(--text-dim);
  text-align: right;
  flex-shrink: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

.session-card .tool-bar .tool-bar-fill {
  height: 3px;
  background: var(--accent-cyan);
  border-radius: 2px;
  opacity: 0.6;
  transition: width 0.3s ease;
  flex: 1;
  max-width: 100%;
}

.session-card .tool-bar .tool-count {
  color: var(--text-dim);
  width: 20px;
  text-align: right;
  flex-shrink: 0;
}

/* ---- Status-based Card Borders & Glows ---- */

.session-card[data-status="idle"] {
  border-color: rgba(0, 255, 136, 0.25);
  box-shadow: 0 0 15px rgba(0, 255, 136, 0.06);
}

.session-card[data-status="prompting"] {
  border-color: rgba(0, 229, 255, 0.35);
  animation: pulse-glow-cyan 2s ease-in-out infinite;
}

.session-card[data-status="working"] {
  border-color: rgba(255, 145, 0, 0.4);
  animation: pulse-glow-orange 1.5s ease-in-out infinite;
}

.session-card[data-status="ended"] {
  border-color: rgba(255, 51, 85, 0.2);
  box-shadow: 0 0 10px rgba(255, 51, 85, 0.05);
  opacity: 0.6;
}

.session-card[data-status="ended"] .card-info {
  opacity: 0.7;
}

/* ---- Keyframe Animations ---- */

@keyframes pulse-glow-cyan {
  0%, 100% {
    box-shadow: 0 0 15px rgba(0, 229, 255, 0.08);
  }
  50% {
    box-shadow: 0 0 35px rgba(0, 229, 255, 0.2);
  }
}

@keyframes pulse-glow-orange {
  0%, 100% {
    box-shadow: 0 0 20px rgba(255, 145, 0, 0.1);
  }
  50% {
    box-shadow: 0 0 40px rgba(255, 145, 0, 0.25);
  }
}

@keyframes scanline {
  0% { background-position: 0 0; }
  100% { background-position: 0 100vh; }
}

@keyframes slide-in-right {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ---- Empty State ---- */

#empty-state {
  grid-area: main;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
  text-align: center;
  gap: 12px;
}

#empty-state .empty-icon {
  font-size: 48px;
  color: var(--text-dim);
  opacity: 0.4;
  animation: pulse-empty 3s ease-in-out infinite;
}

@keyframes pulse-empty {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.05); }
}

#empty-state h2 {
  font-size: 18px;
  font-weight: 300;
  color: var(--text-secondary);
  letter-spacing: 2px;
}

#empty-state p {
  font-size: 12px;
  color: var(--text-dim);
  letter-spacing: 1px;
}

/* ---- Activity Feed ---- */

#activity-feed {
  grid-area: footer;
  background: linear-gradient(0deg, #0a0a1a 0%, rgba(10, 10, 26, 0.95) 100%);
  border-top: 1px solid rgba(0, 229, 255, 0.1);
  max-height: 120px;
  z-index: 10;
  position: relative;
  overflow: hidden;
}

.feed-header {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 2px;
  color: var(--text-dim);
  padding: 6px 16px 4px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

#feed-entries {
  overflow-y: auto;
  max-height: 90px;
  padding: 4px 16px;
}

#feed-entries::-webkit-scrollbar {
  width: 4px;
}

#feed-entries::-webkit-scrollbar-track {
  background: transparent;
}

#feed-entries::-webkit-scrollbar-thumb {
  background: rgba(0, 229, 255, 0.1);
  border-radius: 2px;
}

.feed-entry {
  font-size: 11px;
  padding: 2px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  animation: fade-in 0.3s ease;
}

.feed-entry .feed-time {
  color: var(--text-dim);
  margin-right: 8px;
}

.feed-entry .feed-project {
  color: var(--accent-cyan);
  margin-right: 6px;
}

.feed-entry .feed-detail {
  color: var(--text-secondary);
}

/* ---- Session Detail Overlay ---- */

#session-detail-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 100;
  background: var(--overlay-bg);
  animation: fade-in 0.2s ease;
}

#session-detail-panel {
  position: absolute;
  top: 0;
  right: 0;
  width: 480px;
  max-width: 90vw;
  height: 100%;
  background: var(--bg-panel);
  border-left: 1px solid var(--border-accent);
  box-shadow: -10px 0 40px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  animation: slide-in-right 0.3s ease;
  overflow: hidden;
}

#close-detail {
  position: absolute;
  top: 12px;
  right: 16px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 24px;
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  transition: color 0.2s, background 0.2s;
  z-index: 1;
}

#close-detail:hover {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.06);
}

/* Detail Header */
.detail-header {
  padding: 20px 50px 14px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
}

.detail-header h3 {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-primary);
  margin-right: auto;
}

#detail-status-badge {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1.5px;
  padding: 2px 8px;
  border-radius: 3px;
  text-transform: uppercase;
}

#detail-model {
  font-size: 10px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
}

#detail-duration {
  font-size: 10px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
}

/* Tabs */
.detail-tabs {
  display: flex;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  padding: 0 20px;
}

.detail-tabs .tab {
  background: none;
  border: none;
  color: var(--text-dim);
  font-family: var(--font-mono);
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 1px;
  padding: 10px 16px;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: color 0.2s, border-color 0.2s;
}

.detail-tabs .tab:hover {
  color: var(--text-secondary);
}

.detail-tabs .tab.active {
  color: var(--accent-cyan);
  border-bottom-color: var(--accent-cyan);
}

/* Tab Content */
.tab-content {
  display: none;
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
}

.tab-content.active {
  display: block;
}

.tab-content::-webkit-scrollbar {
  width: 4px;
}

.tab-content::-webkit-scrollbar-track {
  background: transparent;
}

.tab-content::-webkit-scrollbar-thumb {
  background: rgba(0, 229, 255, 0.1);
  border-radius: 2px;
}

/* Prompt entries */
.prompt-entry {
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
}

.prompt-entry .prompt-time {
  font-size: 9px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
  display: block;
  margin-bottom: 4px;
}

.prompt-entry .prompt-text {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.6;
  white-space: pre-wrap;
  word-break: break-word;
}

/* Response entries */
.response-entry {
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
}

.response-entry .response-time {
  font-size: 9px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
  display: block;
  margin-bottom: 4px;
}

.response-entry .response-text {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.6;
  white-space: pre-wrap;
  word-break: break-word;
}

/* Tool log entries */
.tool-entry {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.02);
  font-size: 11px;
}

.tool-entry .tool-time {
  font-size: 9px;
  color: var(--text-dim);
  flex-shrink: 0;
  width: 60px;
}

.tool-entry .tool-name-badge {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1px;
  padding: 1px 6px;
  border-radius: 3px;
  background: rgba(0, 229, 255, 0.1);
  color: var(--accent-cyan);
  border: 1px solid rgba(0, 229, 255, 0.2);
  flex-shrink: 0;
}

.tool-entry .tool-detail {
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
}

/* Event log entries */
.event-entry {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 5px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.02);
  font-size: 11px;
}

.event-entry .event-time {
  font-size: 9px;
  color: var(--text-dim);
  flex-shrink: 0;
  width: 60px;
}

.event-entry .event-type {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.5px;
  color: var(--accent-purple);
  flex-shrink: 0;
  width: 120px;
}

.event-entry .event-detail {
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
}

/* Empty state inside tabs */
.tab-empty {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-dim);
  font-size: 11px;
  letter-spacing: 1px;
}

/* ---- Responsive ---- */

@media (max-width: 640px) {
  #sessions-grid {
    grid-template-columns: 1fr;
    gap: 14px;
    padding: 14px;
  }

  .session-card .robot-viewport {
    min-height: 170px;
  }

  #header {
    flex-direction: column;
    gap: 8px;
    padding: 10px 16px;
  }

  .header-title {
    font-size: 12px;
    letter-spacing: 2px;
  }

  #global-stats {
    font-size: 10px;
    gap: 12px;
  }

  #session-detail-panel {
    width: 100%;
    max-width: 100vw;
  }

  #activity-feed {
    max-height: 80px;
  }
}

@media (max-width: 960px) and (min-width: 641px) {
  #sessions-grid {
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 20px;
    padding: 20px;
  }

  .session-card .robot-viewport {
    min-height: 190px;
  }
}

/* ============================================================
   Navigation Bar
   ============================================================ */

#main-nav {
  grid-area: nav;
  display: flex;
  flex-direction: row;
  background: linear-gradient(180deg, var(--bg-header) 0%, var(--bg-primary) 100%);
  border-bottom: 1px solid var(--border-accent);
  padding: 0 24px;
  z-index: 10;
  position: relative;
  gap: 0;
}

.nav-btn {
  background: none;
  border: none;
  color: var(--text-dim);
  font-family: var(--font-mono);
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 1.5px;
  padding: 10px 20px;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: color 0.2s, border-color 0.2s;
}

.nav-btn:hover {
  color: var(--text-secondary);
}

.nav-btn.active {
  color: var(--accent-cyan);
  border-bottom-color: var(--accent-cyan);
}

/* ============================================================
   View Panels
   ============================================================ */

.view-panel {
  display: none;
}

.view-panel.active {
  display: block;
  grid-area: main;
  position: relative;
  overflow: hidden;
}

/* ============================================================
   History View
   ============================================================ */

#view-history {
  grid-area: main;
  padding: 20px;
  overflow-y: auto;
}

#history-controls {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
  flex-wrap: wrap;
  align-items: center;
}

#history-controls input,
#history-controls select {
  background: var(--bg-card);
  border: 1px solid rgba(0, 229, 255, 0.15);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 11px;
  padding: 8px 12px;
  border-radius: 4px;
  outline: none;
}

#history-controls input:focus,
#history-controls select:focus {
  border-color: var(--accent-cyan);
}

#search-input {
  flex: 1;
  min-width: 200px;
}

.history-row {
  display: grid;
  grid-template-columns: 1fr auto auto auto auto auto auto;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-card);
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: 8px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: all 0.2s;
  align-items: center;
  font-size: 12px;
}

.history-row:hover {
  background: var(--bg-card-hover);
  border-color: rgba(0, 229, 255, 0.15);
}

.history-project {
  font-weight: 700;
  color: var(--text-primary);
}

.history-date {
  color: var(--text-secondary);
  font-size: 10px;
}

.history-duration {
  color: var(--text-dim);
  font-size: 10px;
}

.history-status {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1px;
  padding: 2px 8px;
  border-radius: 3px;
}

.history-status.idle {
  color: var(--accent-green);
  border: 1px solid rgba(0, 255, 136, 0.3);
  background: rgba(0, 255, 136, 0.08);
}

.history-status.working {
  color: var(--accent-orange);
  border: 1px solid rgba(255, 145, 0, 0.3);
  background: rgba(255, 145, 0, 0.08);
}

.history-status.ended {
  color: var(--accent-red);
  border: 1px solid rgba(255, 51, 85, 0.3);
  background: rgba(255, 51, 85, 0.08);
}

.history-status.prompting {
  color: var(--accent-cyan);
  border: 1px solid rgba(0, 229, 255, 0.3);
  background: rgba(0, 229, 255, 0.08);
}

.history-prompts,
.history-tools {
  color: var(--text-dim);
  font-size: 10px;
}

.history-branch {
  color: var(--accent-purple);
  font-size: 10px;
}

#history-pagination {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 16px;
  padding: 12px;
}

.pagination-btn {
  background: var(--bg-card);
  border: 1px solid rgba(0, 229, 255, 0.15);
  color: var(--text-secondary);
  padding: 6px 12px;
  border-radius: 4px;
  font-family: var(--font-mono);
  font-size: 11px;
  cursor: pointer;
}

.pagination-btn:hover {
  border-color: var(--accent-cyan);
}

.pagination-btn.active {
  background: rgba(0, 229, 255, 0.1);
  color: var(--accent-cyan);
  border-color: var(--accent-cyan);
}

/* ============================================================
   Timeline View
   ============================================================ */

#view-timeline {
  grid-area: main;
  padding: 20px;
  overflow-y: auto;
}

#timeline-controls {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
  align-items: center;
}

#timeline-controls input,
#timeline-controls select {
  background: var(--bg-card);
  border: 1px solid rgba(0, 229, 255, 0.15);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 11px;
  padding: 8px 12px;
  border-radius: 4px;
  outline: none;
}

#timeline-controls input:focus,
#timeline-controls select:focus {
  border-color: var(--accent-cyan);
}

#timeline-chart {
  min-height: 350px;
  background: var(--bg-card);
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: 12px;
  padding: 20px;
  position: relative;
}

/* ============================================================
   Analytics View
   ============================================================ */

#view-analytics {
  grid-area: main;
  padding: 20px;
  overflow-y: auto;
}

#analytics-summary {
  display: flex;
  gap: 16px;
  margin-bottom: 24px;
  flex-wrap: wrap;
}

.summary-stat {
  background: var(--bg-card);
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: 8px;
  padding: 16px 20px;
  flex: 1;
  min-width: 150px;
  text-align: center;
}

.summary-stat .stat-label {
  font-size: 9px;
  letter-spacing: 1.5px;
  color: var(--text-dim);
  text-transform: uppercase;
  margin-bottom: 6px;
}

.summary-stat .stat-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--text-primary);
}

.summary-stat .stat-detail {
  font-size: 10px;
  color: var(--text-secondary);
  margin-top: 4px;
}

#analytics-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.analytics-card {
  background: var(--bg-card);
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: 12px;
  padding: 20px;
  min-height: 300px;
}

.analytics-card h4 {
  font-size: 11px;
  letter-spacing: 1.5px;
  color: var(--text-dim);
  text-transform: uppercase;
  margin-bottom: 16px;
}

/* ============================================================
   Chart Tooltip & Heatmap
   ============================================================ */

.chart-tooltip {
  position: fixed;
  background: var(--bg-card);
  border: 1px solid var(--accent-cyan);
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 10px;
  color: var(--text-primary);
  pointer-events: none;
  z-index: 1000;
  box-shadow: 0 0 20px rgba(0, 229, 255, 0.1);
}

.heatmap-cell {
  width: 14px;
  height: 14px;
  border-radius: 2px;
  transition: opacity 0.2s;
}

/* ============================================================
   Responsive - New Views
   ============================================================ */

@media (max-width: 960px) {
  #analytics-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 640px) {
  #history-controls {
    flex-direction: column;
  }

  .history-row {
    grid-template-columns: 1fr;
  }
}

/* ============================================================
   Session Control Buttons
   ============================================================ */

.ctrl-bar {
  display: flex;
  gap: 8px;
  padding: 12px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.ctrl-btn {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--text-secondary);
  font-family: var(--font-mono);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 1px;
  padding: 6px 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}

.ctrl-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

.ctrl-btn.kill { color: var(--accent-red); border-color: rgba(255, 51, 85, 0.3); }
.ctrl-btn.kill:hover { background: rgba(255, 51, 85, 0.15); }
.ctrl-btn.archive { color: var(--accent-purple); border-color: rgba(170, 102, 255, 0.3); }
.ctrl-btn.archive:hover { background: rgba(170, 102, 255, 0.15); }
.ctrl-btn.export { color: var(--accent-green); border-color: rgba(0, 255, 136, 0.3); }
.ctrl-btn.export:hover { background: rgba(0, 255, 136, 0.15); }
.ctrl-btn.notes { color: var(--accent-cyan); border-color: rgba(0, 229, 255, 0.3); }
.ctrl-btn.notes:hover { background: rgba(0, 229, 255, 0.15); }
.ctrl-btn.alert { color: var(--accent-orange); border-color: rgba(255, 145, 0, 0.3); }
.ctrl-btn.alert:hover { background: rgba(255, 145, 0, 0.15); }

/* ============================================================
   Modals
   ============================================================ */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  z-index: 200;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fade-in 0.2s ease;
}

.modal-panel {
  background: var(--bg-panel);
  border: 1px solid rgba(0, 229, 255, 0.2);
  border-radius: 12px;
  padding: 24px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 0 60px rgba(0, 0, 0, 0.5);
}

.modal-panel h3 {
  font-size: 14px;
  color: var(--text-primary);
  margin-bottom: 12px;
}

.modal-panel p {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 16px;
  line-height: 1.6;
}

.modal-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.alert-input-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
}

.alert-input {
  background: var(--bg-card);
  border: 1px solid rgba(0, 229, 255, 0.2);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 14px;
  padding: 8px 12px;
  border-radius: 4px;
  width: 80px;
  outline: none;
}

.alert-input:focus {
  border-color: var(--accent-orange);
}

.alert-input-row span {
  color: var(--text-secondary);
  font-size: 12px;
}

/* ============================================================
   Notes Tab
   ============================================================ */

.notes-compose {
  margin-bottom: 16px;
}

#note-textarea {
  width: 100%;
  background: var(--bg-card);
  border: 1px solid rgba(0, 229, 255, 0.15);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 12px;
  padding: 10px;
  border-radius: 6px;
  resize: vertical;
  outline: none;
}

#note-textarea:focus {
  border-color: var(--accent-cyan);
}

#save-note {
  margin-top: 8px;
}

.note-entry {
  padding: 12px;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: 6px;
  margin-bottom: 8px;
}

.note-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.note-time {
  font-size: 9px;
  color: var(--text-dim);
}

.note-delete {
  background: none;
  border: none;
  color: var(--accent-red);
  cursor: pointer;
  font-size: 11px;
  opacity: 0.6;
  font-family: var(--font-mono);
}

.note-delete:hover {
  opacity: 1;
}

.note-text {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.6;
  white-space: pre-wrap;
}

/* ============================================================
   Toast Notifications
   ============================================================ */

#toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 300;
  display: flex;
  flex-direction: column;
  gap: 8px;
  pointer-events: none;
}

.toast {
  background: var(--bg-panel);
  border: 1px solid var(--accent-orange);
  border-radius: 8px;
  padding: 12px 16px;
  min-width: 280px;
  box-shadow: 0 0 30px rgba(255, 145, 0, 0.15);
  animation: toast-in 0.3s ease;
  pointer-events: auto;
}

.toast.fade-out {
  animation: toast-out 0.3s ease forwards;
}

.toast-title {
  font-size: 11px;
  font-weight: 700;
  color: var(--accent-orange);
  letter-spacing: 1px;
  margin-bottom: 4px;
}

.toast-msg {
  font-size: 11px;
  color: var(--text-secondary);
}

@keyframes toast-in {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes toast-out {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}

/* ============================================================
   Archived Badge
   ============================================================ */

.history-status.archived {
  color: var(--accent-purple);
  border: 1px solid rgba(170, 102, 255, 0.3);
  background: rgba(170, 102, 255, 0.08);
}

.archived-badge {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1px;
  padding: 2px 8px;
  border-radius: 3px;
  color: var(--accent-purple);
  border: 1px solid rgba(170, 102, 255, 0.3);
  background: rgba(170, 102, 255, 0.08);
  margin-left: 8px;
}

/* Session card fade-out for removal */
.session-card.removing {
  animation: card-fade-out 2.5s ease forwards;
}

@keyframes card-fade-out {
  0% { opacity: 1; transform: scale(1); }
  70% { opacity: 0.3; transform: scale(0.98); }
  100% { opacity: 0; transform: scale(0.95); }
}

/* ============================================================
   Settings Panel
   ============================================================ */

.settings-gear {
  background: none;
  border: 1px solid var(--border-subtle);
  color: var(--text-secondary);
  font-size: 18px;
  cursor: pointer;
  padding: 4px 10px;
  border-radius: 4px;
  transition: all 0.2s;
  margin-left: 16px;
}

.settings-gear:hover {
  color: var(--accent-cyan);
  border-color: var(--border-accent);
}

.settings-panel {
  max-width: 560px;
  max-height: 85vh;
  overflow-y: auto;
}

.settings-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.settings-header h3 {
  font-size: 16px;
}

.modal-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 22px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
}

.modal-close:hover {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.06);
}

.settings-section {
  margin-bottom: 24px;
  padding-bottom: 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.settings-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.settings-section h4 {
  font-size: 11px;
  letter-spacing: 1.5px;
  color: var(--text-dim);
  text-transform: uppercase;
  margin-bottom: 12px;
}

/* Theme Grid */
.theme-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(95px, 1fr));
  gap: 10px;
}

.theme-swatch {
  background: var(--bg-card);
  border: 2px solid rgba(255, 255, 255, 0.06);
  border-radius: 8px;
  padding: 10px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
  font-family: var(--font-mono);
}

.theme-swatch:hover {
  border-color: rgba(255, 255, 255, 0.15);
}

.theme-swatch.active {
  border-color: var(--accent-cyan);
  box-shadow: 0 0 15px rgba(0, 229, 255, 0.15);
}

.swatch-colors {
  display: flex;
  gap: 4px;
  justify-content: center;
  margin-bottom: 6px;
}

.swatch-colors span {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: inline-block;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.swatch-label {
  font-size: 9px;
  color: var(--text-secondary);
  letter-spacing: 0.5px;
}

/* Font Size */
.font-size-control {
  display: flex;
  align-items: center;
  gap: 12px;
}

.font-btn {
  background: var(--bg-card);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--text-secondary);
  font-family: var(--font-mono);
  font-size: 12px;
  font-weight: 700;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}

.font-btn:hover {
  border-color: var(--accent-cyan);
  color: var(--text-primary);
}

#font-size-display {
  font-size: 12px;
  color: var(--text-primary);
  min-width: 40px;
  text-align: center;
}

#font-size-slider {
  flex: 1;
  accent-color: var(--accent-cyan);
}

/* Model Grid */
.model-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
  gap: 10px;
  margin-bottom: 12px;
}

.model-option {
  background: var(--bg-card);
  border: 2px solid rgba(255, 255, 255, 0.06);
  border-radius: 8px;
  padding: 12px 8px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
  font-family: var(--font-mono);
}

.model-option:hover {
  border-color: rgba(255, 255, 255, 0.15);
}

.model-option.active {
  border-color: var(--accent-cyan);
  box-shadow: 0 0 15px rgba(0, 229, 255, 0.15);
}

.model-icon {
  font-size: 24px;
  margin-bottom: 4px;
}

.model-option span {
  font-size: 9px;
  color: var(--text-secondary);
  letter-spacing: 0.5px;
}

.custom-model-input {
  display: flex;
  gap: 8px;
}

#custom-model-url {
  flex: 1;
  background: var(--bg-card);
  border: 1px solid rgba(0, 229, 255, 0.15);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 11px;
  padding: 8px 10px;
  border-radius: 4px;
  outline: none;
}

#custom-model-url:focus {
  border-color: var(--accent-cyan);
}

/* Sound Controls */
.sound-controls {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.toggle-label {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  font-size: 12px;
  color: var(--text-secondary);
}

.toggle-label input {
  display: none;
}

.toggle-switch {
  position: relative;
  width: 36px;
  height: 20px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  transition: background 0.3s;
  flex-shrink: 0;
}

.toggle-switch::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 16px;
  height: 16px;
  background: var(--text-dim);
  border-radius: 50%;
  transition: transform 0.3s, background 0.3s;
}

.toggle-label input:checked + .toggle-switch {
  background: rgba(0, 229, 255, 0.3);
}

.toggle-label input:checked + .toggle-switch::after {
  transform: translateX(16px);
  background: var(--accent-cyan);
}

.volume-control {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  color: var(--text-secondary);
}

.volume-control input[type=range] {
  flex: 1;
  accent-color: var(--accent-cyan);
}

#volume-display {
  min-width: 35px;
  text-align: right;
}

/* Per-Action Sound Config Grid */
.sound-action-grid {
  margin-top: 14px;
  max-height: 280px;
  overflow-y: auto;
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: 6px;
  padding: 4px 0;
}

.sound-action-grid::-webkit-scrollbar {
  width: 4px;
}

.sound-action-grid::-webkit-scrollbar-track {
  background: transparent;
}

.sound-action-grid::-webkit-scrollbar-thumb {
  background: rgba(0, 229, 255, 0.1);
  border-radius: 2px;
}

.sound-category-label {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1.5px;
  color: var(--text-dim);
  text-transform: uppercase;
  padding: 8px 12px 4px;
}

.sound-action-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 12px;
}

.sound-action-row:hover {
  background: rgba(255, 255, 255, 0.02);
}

.sound-action-label {
  flex: 1;
  font-size: 11px;
  color: var(--text-secondary);
  white-space: nowrap;
}

.sound-action-select {
  background: var(--bg-card);
  border: 1px solid rgba(0, 229, 255, 0.15);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 10px;
  padding: 4px 6px;
  border-radius: 3px;
  outline: none;
  width: 100px;
}

.sound-action-select:focus {
  border-color: var(--accent-cyan);
}

.sound-preview-btn {
  background: none;
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: var(--text-dim);
  font-size: 10px;
  cursor: pointer;
  padding: 3px 7px;
  border-radius: 3px;
  transition: all 0.2s;
  flex-shrink: 0;
}

.sound-preview-btn:hover {
  color: var(--accent-cyan);
  border-color: rgba(0, 229, 255, 0.3);
  background: rgba(0, 229, 255, 0.05);
}

/* ============================================================
   Settings Tabs
   ============================================================ */

.settings-tabs {
  display: flex;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  padding: 0 20px;
  margin-bottom: 0;
}

.settings-tab {
  background: none;
  border: none;
  color: var(--text-dim);
  font-family: var(--font-mono);
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 1px;
  padding: 10px 16px;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: color 0.2s, border-color 0.2s;
}

.settings-tab:hover {
  color: var(--text-secondary);
}

.settings-tab.active {
  color: var(--accent-cyan);
  border-bottom-color: var(--accent-cyan);
}

.settings-tab-content {
  display: none;
  padding: 16px 24px;
  overflow-y: auto;
  max-height: 55vh;
}

.settings-tab-content.active {
  display: block;
}

.settings-tab-content::-webkit-scrollbar {
  width: 4px;
}

.settings-tab-content::-webkit-scrollbar-track {
  background: transparent;
}

.settings-tab-content::-webkit-scrollbar-thumb {
  background: rgba(0, 229, 255, 0.1);
  border-radius: 2px;
}

/* Auto-save indicator */
.autosave-indicator {
  font-size: 10px;
  color: var(--accent-green);
  letter-spacing: 1px;
  opacity: 0;
  transition: opacity 0.3s ease;
  margin-right: auto;
  margin-left: 12px;
}

.autosave-indicator.visible {
  opacity: 1;
  animation: autosave-fade 2s ease forwards;
}

@keyframes autosave-fade {
  0% { opacity: 1; }
  70% { opacity: 1; }
  100% { opacity: 0; }
}

/* Scanline toggle */
body.no-scanlines::after {
  display: none;
}

/* Card size variants */
body[data-card-size="compact"] .session-card .robot-viewport {
  min-height: 140px;
}

body[data-card-size="compact"] .session-card .card-info {
  padding: 10px 14px;
}

body[data-card-size="compact"] .session-card .card-prompt {
  -webkit-line-clamp: 2;
}

body[data-card-size="large"] .session-card .robot-viewport {
  min-height: 280px;
}

body[data-card-size="small"] .session-card .robot-viewport {
  min-height: 120px;
}

body[data-card-size="small"] .session-card .card-info {
  padding: 8px 12px;
}

body[data-card-size="small"] .session-card .card-prompt {
  -webkit-line-clamp: 1;
  font-size: 10px;
}

body[data-card-size="small"] .session-card .card-stats {
  font-size: 9px;
  gap: 8px;
}

body[data-card-size="small"] .session-card .tool-bars {
  display: none;
}

body[data-card-size="small"] .css-robot {
  transform: scale(0.65);
  transform-origin: center center;
}

body[data-card-size="small"] #sessions-grid {
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 14px;
}

/* tiny card size removed */

/* Card size control buttons */
.card-size-control {
  display: flex;
  gap: 8px;
}

.card-size-btn {
  background: var(--bg-card);
  border: 2px solid rgba(255, 255, 255, 0.06);
  color: var(--text-secondary);
  font-family: var(--font-mono);
  font-size: 11px;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.card-size-btn:hover {
  border-color: rgba(255, 255, 255, 0.15);
}

.card-size-btn.active {
  border-color: var(--accent-cyan);
  color: var(--accent-cyan);
  box-shadow: 0 0 10px rgba(0, 229, 255, 0.1);
}

/* Advanced tab actions */
.advanced-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.settings-hint {
  font-size: 11px;
  color: var(--text-dim);
  margin-bottom: 10px;
  line-height: 1.5;
}

/* ============================================================
   Theme Variants
   ============================================================ */

body[data-theme="cyberpunk"] {
  --bg-primary: #0d0221;
  --bg-card: #1a0533;
  --bg-card-hover: #2a0845;
  --bg-panel: #130330;
  --bg-header: #0a0118;
  --border-glow: #ff00ff;
  --border-subtle: rgba(255, 255, 255, 0.06);
  --border-accent: rgba(255, 0, 255, 0.2);
  --accent-cyan: #00ffff;
  --accent-orange: #ff00ff;
  --accent-green: #39ff14;
  --accent-red: #ff0055;
  --accent-purple: #bf00ff;
  --text-primary: #f0e0ff;
  --text-secondary: #bb88ee;
  --text-dim: #7755aa;
  --robot-body: #2a1a4a;
  --robot-body-dark: #1a0a3a;
}

body[data-theme="dracula"] {
  --bg-primary: #282a36;
  --bg-card: #44475a;
  --bg-card-hover: #4e5166;
  --bg-panel: #2d3045;
  --bg-header: #21222c;
  --border-glow: #bd93f9;
  --border-subtle: rgba(255, 255, 255, 0.08);
  --border-accent: rgba(189, 147, 249, 0.2);
  --accent-cyan: #8be9fd;
  --accent-orange: #ffb86c;
  --accent-green: #50fa7b;
  --accent-red: #ff5555;
  --accent-purple: #bd93f9;
  --text-primary: #f8f8f2;
  --text-secondary: #bfbfbf;
  --text-dim: #6272a4;
}

body[data-theme="solarized"] {
  --bg-primary: #002b36;
  --bg-card: #073642;
  --bg-card-hover: #0a4050;
  --bg-panel: #003847;
  --bg-header: #001f28;
  --border-glow: #2aa198;
  --border-subtle: rgba(255, 255, 255, 0.06);
  --border-accent: rgba(42, 161, 152, 0.2);
  --accent-cyan: #2aa198;
  --accent-orange: #cb4b16;
  --accent-green: #859900;
  --accent-red: #dc322f;
  --accent-purple: #6c71c4;
  --text-primary: #93a1a1;
  --text-secondary: #657b83;
  --text-dim: #4a6269;
}

body[data-theme="nord"] {
  --bg-primary: #2e3440;
  --bg-card: #3b4252;
  --bg-card-hover: #434c5e;
  --bg-panel: #333b49;
  --bg-header: #272d38;
  --border-glow: #88c0d0;
  --border-subtle: rgba(255, 255, 255, 0.06);
  --border-accent: rgba(136, 192, 208, 0.2);
  --accent-cyan: #88c0d0;
  --accent-orange: #d08770;
  --accent-green: #a3be8c;
  --accent-red: #bf616a;
  --accent-purple: #b48ead;
  --text-primary: #eceff4;
  --text-secondary: #81a1c1;
  --text-dim: #616e88;
}

body[data-theme="monokai"] {
  --bg-primary: #272822;
  --bg-card: #3e3d32;
  --bg-card-hover: #49483e;
  --bg-panel: #2f2e28;
  --bg-header: #1e1f1a;
  --border-glow: #66d9ef;
  --border-subtle: rgba(255, 255, 255, 0.06);
  --border-accent: rgba(102, 217, 239, 0.2);
  --accent-cyan: #66d9ef;
  --accent-orange: #fd971f;
  --accent-green: #a6e22e;
  --accent-red: #f92672;
  --accent-purple: #ae81ff;
  --text-primary: #f8f8f2;
  --text-secondary: #a6a28c;
  --text-dim: #75715e;
}

body[data-theme="light"] {
  --bg-primary: #f0f2f5;
  --bg-card: #ffffff;
  --bg-card-hover: #f5f7fa;
  --bg-panel: #fafbfc;
  --bg-header: #e8eaed;
  --border-glow: #3b82f6;
  --border-subtle: rgba(0, 0, 0, 0.08);
  --border-accent: rgba(59, 130, 246, 0.2);
  --accent-cyan: #0284c7;
  --accent-orange: #d97706;
  --accent-green: #16a34a;
  --accent-red: #dc2626;
  --accent-purple: #7c3aed;
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --text-dim: #94a3b8;
  --robot-body: #c8cdd5;
  --robot-body-dark: #b0b7c3;
  --robot-border: rgba(0, 0, 0, 0.1);
  --mute-bg: rgba(255, 255, 255, 0.8);
  --overlay-bg: rgba(0, 0, 0, 0.3);
}

body[data-theme="warm"] {
  --bg-primary: #faf6f1;
  --bg-card: #fffcf7;
  --bg-card-hover: #f5efe7;
  --bg-panel: #f8f3ec;
  --bg-header: #ede6dc;
  --border-glow: #d97706;
  --border-subtle: rgba(0, 0, 0, 0.08);
  --border-accent: rgba(180, 115, 51, 0.2);
  --accent-cyan: #92400e;
  --accent-orange: #c2410c;
  --accent-green: #4d7c0f;
  --accent-red: #b91c1c;
  --accent-purple: #7e22ce;
  --text-primary: #292524;
  --text-secondary: #57534e;
  --text-dim: #a8a29e;
  --robot-body: #d6cec4;
  --robot-body-dark: #c4bab0;
  --robot-border: rgba(0, 0, 0, 0.1);
  --mute-bg: rgba(255, 252, 247, 0.8);
  --overlay-bg: rgba(0, 0, 0, 0.3);
}

body[data-theme="blonde"] {
  --bg-primary: #fdf8ef;
  --bg-card: #fffbf3;
  --bg-card-hover: #f9f0e1;
  --bg-panel: #fbf5ea;
  --bg-header: #f0e8d8;
  --border-glow: #ca8a04;
  --border-subtle: rgba(0, 0, 0, 0.08);
  --border-accent: rgba(161, 98, 7, 0.2);
  --accent-cyan: #854d0e;
  --accent-orange: #b45309;
  --accent-green: #3f6212;
  --accent-red: #991b1b;
  --accent-purple: #6b21a8;
  --text-primary: #292420;
  --text-secondary: #57524a;
  --text-dim: #a09888;
  --robot-body: #d9d0c2;
  --robot-body-dark: #c7bdb0;
  --robot-border: rgba(0, 0, 0, 0.1);
  --mute-bg: rgba(255, 251, 243, 0.8);
  --overlay-bg: rgba(0, 0, 0, 0.3);
}

/* Light themes: soften scanline overlay */
body[data-theme="light"]::after,
body[data-theme="warm"]::after,
body[data-theme="blonde"]::after {
  background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.01) 2px, rgba(0,0,0,0.01) 4px);
}

/* Light themes: fix elements with hardcoded dark-theme colors */
body[data-theme="light"] .header-title,
body[data-theme="warm"] .header-title,
body[data-theme="blonde"] .header-title {
  text-shadow: none;
}

body[data-theme="light"] .session-card,
body[data-theme="warm"] .session-card,
body[data-theme="blonde"] .session-card {
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
}

body[data-theme="light"] .session-card:hover,
body[data-theme="warm"] .session-card:hover,
body[data-theme="blonde"] .session-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

body[data-theme="light"] #session-detail-panel,
body[data-theme="warm"] #session-detail-panel,
body[data-theme="blonde"] #session-detail-panel {
  box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
}

body[data-theme="light"] .modal-panel,
body[data-theme="warm"] .modal-panel,
body[data-theme="blonde"] .modal-panel {
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
}

body[data-theme="light"] .status-badge,
body[data-theme="warm"] .status-badge,
body[data-theme="blonde"] .status-badge {
  background: rgba(0, 0, 0, 0.06);
}

body[data-theme="light"] .ctrl-btn,
body[data-theme="warm"] .ctrl-btn,
body[data-theme="blonde"] .ctrl-btn {
  border-color: rgba(0, 0, 0, 0.15);
}

body[data-theme="light"] .ctrl-btn:hover,
body[data-theme="warm"] .ctrl-btn:hover,
body[data-theme="blonde"] .ctrl-btn:hover {
  background: rgba(0, 0, 0, 0.06);
}

body[data-theme="light"] .toast,
body[data-theme="warm"] .toast,
body[data-theme="blonde"] .toast {
  background: var(--bg-card);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  border: 1px solid var(--border-subtle);
}

/* ============================================================
   Connection Status Indicator
   ============================================================ */

#connection-status {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  letter-spacing: 1px;
  color: var(--text-secondary);
}

.conn-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
  transition: background 0.3s, box-shadow 0.3s;
}

.conn-dot.connected {
  background: var(--accent-green);
  box-shadow: 0 0 8px var(--accent-green);
}

.conn-dot.disconnected {
  background: var(--accent-red);
  box-shadow: 0 0 8px var(--accent-red);
  animation: conn-pulse 1.5s ease-in-out infinite;
}

@keyframes conn-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

#conn-label {
  color: var(--text-dim);
}

/* ============================================================
   Live Search Bar
   ============================================================ */

#live-search-bar {
  padding: 12px 24px 0;
  position: relative;
  z-index: 5;
}

#live-search {
  width: 100%;
  max-width: 400px;
  background: var(--bg-card);
  border: 1px solid rgba(0, 229, 255, 0.15);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 12px;
  padding: 8px 14px;
  border-radius: 6px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

#live-search:focus {
  border-color: var(--accent-cyan);
  box-shadow: 0 0 12px rgba(0, 229, 255, 0.1);
}

#live-search::placeholder {
  color: var(--text-dim);
  font-style: italic;
}

/* Filtered cards are hidden */
.session-card.filtered {
  display: none !important;
}

/* ============================================================
   Quick Actions Toolbar
   ============================================================ */

#quick-actions {
  position: fixed;
  bottom: 140px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(14, 14, 36, 0.92);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(0, 229, 255, 0.12);
  border-radius: 8px;
  padding: 6px 12px;
  z-index: 50;
}

.qa-btn {
  background: none;
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: var(--text-secondary);
  font-family: var(--font-mono);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 1px;
  padding: 5px 12px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.qa-btn:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--accent-cyan);
  border-color: rgba(0, 229, 255, 0.2);
}

.qa-separator {
  width: 1px;
  height: 20px;
  background: rgba(255, 255, 255, 0.08);
}

/* ============================================================
   Keyboard Shortcuts Modal
   ============================================================ */

.shortcuts-panel {
  max-width: 380px;
}

.shortcut-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 20px;
}

.shortcut-row {
  display: flex;
  align-items: center;
  gap: 14px;
}

.shortcut-row kbd {
  display: inline-block;
  min-width: 32px;
  text-align: center;
  padding: 3px 8px;
  font-family: var(--font-mono);
  font-size: 11px;
  font-weight: 700;
  color: var(--text-primary);
  background: var(--bg-card);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 4px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.shortcut-row span {
  font-size: 12px;
  color: var(--text-secondary);
}

/* ============================================================
   Session Title in Detail Panel
   ============================================================ */

.detail-title-row {
  padding: 0 20px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.detail-title-input {
  width: 100%;
  background: transparent;
  border: 1px solid transparent;
  color: var(--text-secondary);
  font-family: var(--font-mono);
  font-size: 11px;
  font-style: italic;
  padding: 4px 8px;
  border-radius: 4px;
  outline: none;
  transition: border-color 0.2s, background 0.2s;
}

.detail-title-input:hover {
  border-color: rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.02);
}

.detail-title-input:focus {
  border-color: var(--accent-cyan);
  background: var(--bg-card);
  color: var(--text-primary);
  font-style: normal;
}

/* Session title in card */
.session-card .card-title {
  font-size: 10px;
  color: var(--text-dim);
  font-style: italic;
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ============================================================
   CSS Animated Robot Character
   ============================================================ */

.css-robot {
  --robot-color: #00e5ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  transform-origin: center center;
}

.robot-body-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
}

/* ---- Antenna ---- */
.robot-antenna {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  z-index: 2;
}

.robot-antenna-stick {
  width: 2px;
  height: 18px;
  background: linear-gradient(to top, var(--robot-body), var(--robot-color));
  border-radius: 1px;
}

.robot-antenna-ball {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--robot-color);
  box-shadow: 0 0 8px var(--robot-color), 0 0 16px var(--robot-color);
  margin-bottom: -2px;
  order: -1;
}

/* ---- Head ---- */
.robot-head {
  width: 80px;
  height: 56px;
  background: linear-gradient(145deg, var(--robot-body), var(--robot-body-dark));
  border: 2px solid var(--robot-border);
  border-radius: 16px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  box-shadow:
    0 0 12px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

/* ---- Eyes ---- */
.robot-eye {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--robot-color);
  box-shadow: 0 0 6px var(--robot-color), 0 0 12px var(--robot-color);
  transition: all 0.3s ease;
}

/* ---- Mouth ---- */
.robot-mouth {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 24px;
  height: 3px;
  background: var(--robot-color);
  border-radius: 2px;
  opacity: 0.5;
  box-shadow: 0 0 4px var(--robot-color);
  transition: all 0.3s ease;
}

/* ---- Neck ---- */
.robot-neck {
  width: 16px;
  height: 8px;
  background: linear-gradient(to bottom, var(--robot-body), var(--robot-body-dark));
  border-left: 2px solid var(--robot-border);
  border-right: 2px solid var(--robot-border);
}

/* ---- Torso ---- */
.robot-torso {
  width: 60px;
  height: 52px;
  background: linear-gradient(180deg, var(--robot-body), var(--robot-body-dark));
  border: 2px solid var(--robot-border);
  border-radius: 8px 8px 12px 12px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

/* ---- Chest Light ---- */
.robot-chest-light {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--robot-color);
  box-shadow: 0 0 6px var(--robot-color);
  opacity: 0.7;
  transition: all 0.3s ease;
}

/* ---- Typing Dots (visible only when working) ---- */
.robot-typing-dots {
  display: none;
  gap: 3px;
  margin-top: 6px;
}

.robot-typing-dots span {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--robot-color);
  opacity: 0.5;
}

/* ---- Shadow ---- */
.robot-shadow {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 70px;
  height: 14px;
  border-radius: 50%;
  background: var(--robot-color);
  opacity: 0.12;
  filter: blur(6px);
  transition: all 0.3s ease;
}

/* ============================================================
   Robot Status: IDLE — gentle float, slow blink, green glow
   ============================================================ */

.css-robot[data-status="idle"] .robot-body-wrap {
  animation: robot-float 3s ease-in-out infinite;
}

.css-robot[data-status="idle"] .robot-eye {
  animation: robot-blink 4s ease-in-out infinite;
}

.css-robot[data-status="idle"] .robot-chest-light {
  animation: robot-chest-pulse-slow 3s ease-in-out infinite;
}

.css-robot[data-status="idle"] .robot-shadow {
  animation: robot-shadow-float 3s ease-in-out infinite;
}

/* ============================================================
   Robot Status: PROMPTING — antenna pulse, wider eyes, cyan glow
   ============================================================ */

.css-robot[data-status="prompting"] .robot-body-wrap {
  animation: robot-float 2.5s ease-in-out infinite;
}

.css-robot[data-status="prompting"] .robot-antenna-ball {
  animation: robot-antenna-pulse 0.8s ease-in-out infinite;
}

.css-robot[data-status="prompting"] .robot-eye {
  width: 16px;
  height: 16px;
  box-shadow: 0 0 10px var(--robot-color), 0 0 20px var(--robot-color);
}

.css-robot[data-status="prompting"] .robot-mouth {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  opacity: 0.6;
  bottom: 7px;
}

.css-robot[data-status="prompting"] .robot-head {
  animation: robot-tilt 2s ease-in-out infinite;
}

.css-robot[data-status="prompting"] .robot-chest-light {
  animation: robot-chest-pulse-slow 2s ease-in-out infinite;
}

/* ============================================================
   Robot Status: WORKING — energetic bounce, scanning eyes,
   head wobble, pulsing glow, typing dots, vibrant shadow
   ============================================================ */

.css-robot[data-status="working"] .robot-body-wrap {
  animation: robot-work-bounce 0.45s ease-in-out infinite;
}

.css-robot[data-status="working"] .robot-head {
  animation: robot-work-headbob 0.9s ease-in-out infinite;
}

.css-robot[data-status="working"] .robot-eye {
  width: 16px;
  height: 10px;
  border-radius: 3px;
  animation: robot-work-eye-scan 0.8s ease-in-out infinite;
  box-shadow: 0 0 10px var(--robot-color), 0 0 20px var(--robot-color);
}

.css-robot[data-status="working"] .robot-antenna-ball {
  animation: robot-work-antenna 0.5s ease-in-out infinite;
}

.css-robot[data-status="working"] .robot-chest-light {
  animation: robot-work-chest-pulse 0.4s ease-in-out infinite;
}

.css-robot[data-status="working"] .robot-typing-dots {
  display: flex;
}

.css-robot[data-status="working"] .robot-typing-dots span:nth-child(1) {
  animation: robot-typing-dot 0.6s ease-in-out infinite 0s;
}

.css-robot[data-status="working"] .robot-typing-dots span:nth-child(2) {
  animation: robot-typing-dot 0.6s ease-in-out infinite 0.15s;
}

.css-robot[data-status="working"] .robot-typing-dots span:nth-child(3) {
  animation: robot-typing-dot 0.6s ease-in-out infinite 0.3s;
}

.css-robot[data-status="working"] .robot-mouth {
  animation: robot-work-mouth 0.5s ease-in-out infinite;
  opacity: 0.8;
}

.css-robot[data-status="working"] .robot-shadow {
  animation: robot-work-shadow 0.45s ease-in-out infinite;
  background: var(--robot-color);
  opacity: 0.2;
  filter: blur(8px);
}

.css-robot[data-status="working"] .robot-torso {
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.3),
    0 0 12px color-mix(in srgb, var(--robot-color) 20%, transparent),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

/* ============================================================
   Robot Status: ENDED — dashes for eyes, grey, no animation
   ============================================================ */

.css-robot[data-status="ended"] {
  opacity: 0.5;
}

.css-robot[data-status="ended"] .robot-eye {
  width: 14px;
  height: 3px;
  border-radius: 2px;
  background: var(--text-dim);
  box-shadow: none;
}

.css-robot[data-status="ended"] .robot-mouth {
  background: var(--text-dim);
  box-shadow: none;
  opacity: 0.3;
}

.css-robot[data-status="ended"] .robot-antenna-ball {
  background: var(--text-dim);
  box-shadow: none;
}

.css-robot[data-status="ended"] .robot-chest-light {
  background: var(--text-dim);
  box-shadow: none;
  opacity: 0.3;
}

.css-robot[data-status="ended"] .robot-shadow {
  background: var(--text-dim);
  opacity: 0.06;
}

.css-robot[data-status="ended"] .robot-head,
.css-robot[data-status="ended"] .robot-torso {
  border-color: var(--border-subtle);
}

/* ============================================================
   Robot Emote (click acknowledgment)
   ============================================================ */

.css-robot.robot-emote .robot-body-wrap {
  animation: robot-emote-bounce 0.6s ease-out !important;
}

.css-robot.robot-emote .robot-eye {
  box-shadow: 0 0 14px var(--robot-color), 0 0 28px var(--robot-color) !important;
}

.css-robot.robot-emote .robot-antenna-ball {
  box-shadow: 0 0 14px var(--robot-color), 0 0 28px var(--robot-color) !important;
}

/* ============================================================
   Robot Keyframe Animations
   ============================================================ */

@keyframes robot-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

@keyframes robot-shadow-float {
  0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.12; }
  50% { transform: translateX(-50%) scale(0.85); opacity: 0.08; }
}

@keyframes robot-blink {
  0%, 42%, 46%, 100% { height: 14px; }
  44% { height: 2px; }
}

@keyframes robot-chest-pulse-slow {
  0%, 100% { opacity: 0.5; box-shadow: 0 0 6px var(--robot-color); }
  50% { opacity: 1; box-shadow: 0 0 12px var(--robot-color); }
}

@keyframes robot-antenna-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 8px var(--robot-color), 0 0 16px var(--robot-color);
  }
  50% {
    transform: scale(1.4);
    box-shadow: 0 0 16px var(--robot-color), 0 0 32px var(--robot-color);
  }
}

@keyframes robot-tilt {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(3deg); }
  75% { transform: rotate(-3deg); }
}

/* --- Working-state keyframes (energetic, obvious) --- */

@keyframes robot-work-bounce {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-10px) rotate(-1.5deg); }
  75% { transform: translateY(-2px) rotate(1.5deg); }
}

@keyframes robot-work-headbob {
  0%, 100% { transform: rotate(0deg) translateX(0); }
  20% { transform: rotate(-4deg) translateX(-2px); }
  40% { transform: rotate(3deg) translateX(2px); }
  60% { transform: rotate(-2deg) translateX(-1px); }
  80% { transform: rotate(4deg) translateX(1px); }
}

@keyframes robot-work-eye-scan {
  0%, 100% { transform: translateX(0) scaleX(1); }
  15% { transform: translateX(-5px) scaleX(1.2); }
  50% { transform: translateX(5px) scaleX(0.9); }
  85% { transform: translateX(-2px) scaleX(1.1); }
}

@keyframes robot-work-antenna {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 8px var(--robot-color), 0 0 16px var(--robot-color);
  }
  50% {
    transform: scale(1.6);
    box-shadow: 0 0 20px var(--robot-color), 0 0 40px var(--robot-color);
  }
}

@keyframes robot-work-chest-pulse {
  0%, 100% { opacity: 0.5; box-shadow: 0 0 4px var(--robot-color); transform: scale(1); }
  50% { opacity: 1; box-shadow: 0 0 20px var(--robot-color), 0 0 30px var(--robot-color); transform: scale(1.2); }
}

@keyframes robot-work-shadow {
  0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.2; }
  25% { transform: translateX(-50%) scale(0.7); opacity: 0.1; }
  75% { transform: translateX(-50%) scale(1.1); opacity: 0.25; }
}

@keyframes robot-work-mouth {
  0%, 100% { width: 24px; height: 3px; border-radius: 2px; }
  30% { width: 14px; height: 6px; border-radius: 3px; }
  70% { width: 20px; height: 4px; border-radius: 2px; }
}

@keyframes robot-typing-dot {
  0%, 100% { opacity: 0.3; transform: translateY(0); }
  50% { opacity: 1; transform: translateY(-5px); }
}

/* --- Idle-state bounce (kept gentle for contrast) --- */

@keyframes robot-shadow-bounce {
  0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.12; }
  50% { transform: translateX(-50%) scale(0.92); opacity: 0.09; }
}

@keyframes robot-emote-bounce {
  0% { transform: scale(1) translateY(0); }
  30% { transform: scale(1.08) translateY(-8px); }
  60% { transform: scale(0.98) translateY(0); }
  100% { transform: scale(1) translateY(0); }
}

/* ============================================================
   Mute Button (per-session card)
   ============================================================ */

.mute-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 5;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 1px solid var(--border-subtle);
  background: var(--mute-bg);
  backdrop-filter: blur(4px);
  color: var(--text-dim);
  font-size: 13px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  opacity: 0;
  pointer-events: none;
  font-family: var(--font-mono);
  line-height: 1;
  padding: 0;
}

.session-card:hover .mute-btn {
  opacity: 1;
  pointer-events: auto;
}

.mute-btn:hover {
  background: var(--bg-card-hover);
  color: var(--text-primary);
  border-color: var(--border-accent);
}

.mute-btn.muted {
  opacity: 1;
  pointer-events: auto;
  color: var(--accent-red);
  border-color: rgba(255, 51, 85, 0.3);
  background: rgba(255, 51, 85, 0.1);
  text-decoration: line-through;
}
